/**
 * van11y-accessible-accordion-aria - ES2015 accessible accordion system, using ARIA (compatible IE9+ when transpiled)
 * @version v1.0.5
 * @link https://van11y.net/accessible-accordion/
 * @license MIT : https://github.com/nico3333fr/van11y-accessible-accordion-aria/blob/master/LICENSE
 */
"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(exports,"__esModule",{value:!0});var ACCORDION_JS="js-accordion",ACCORDION_JS_HEADER="js-accordion__header",ACCORDION_JS_PANEL="js-accordion__panel",ACCORDION_DATA_PREFIX_CLASS="data-accordion-prefix-classes",ACCORDION_DATA_OPENED="data-accordion-opened",ACCORDION_DATA_MULTISELECTABLE="data-accordion-multiselectable",ACCORDION_PREFIX_IDS="accordion",ACCORDION_BUTTON_ID="_tab",ACCORDION_PANEL_ID="_panel",ACCORDION_STYLE="accordion",ACCORDION_TITLE_STYLE="accordion__title",ACCORDION_HEADER_STYLE="accordion__header",ACCORDION_PANEL_STYLE="accordion__panel",ACCORDION_ROLE_TABLIST="tablist",ACCORDION_ROLE_TAB="tab",ACCORDION_ROLE_TABPANEL="tabpanel",ATTR_ROLE="role",ATTR_MULTISELECTABLE="aria-multiselectable",ATTR_EXPANDED="aria-expanded",ATTR_LABELLEDBY="aria-labelledby",ATTR_HIDDEN="aria-hidden",ATTR_CONTROLS="aria-controls",ATTR_SELECTED="aria-selected",findById=function(e){return document.getElementById(e)},addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},setAttributes=function(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})},unSelectHeaders=function(e){e.forEach(function(e){var t;setAttributes(e,(t={},_defineProperty(t,ATTR_SELECTED,"false"),_defineProperty(t,"tabindex","-1"),t))})},selectHeader=function(e){e.setAttribute(ATTR_SELECTED,!0),e.removeAttribute("tabindex")},selectHeaderInList=function(e,t){var r=void 0;e.forEach(function(e,t){"true"===e.getAttribute(ATTR_SELECTED)&&(r=t)}),"next"===t&&(selectHeader(e[r+1]),setTimeout(function(){e[r+1].focus()},0)),"prev"===t&&(selectHeader(e[r-1]),setTimeout(function(){e[r-1].focus()},0))},searchParent=function(e,t){for(var r=!1,A=e.parentNode;A&&r===!1;)hasClass(A,t)===!0?r=!0:A=A.parentNode;return r===!0?A.getAttribute("id"):""},$listAccordions=function(){return[].slice.call(document.querySelectorAll("."+ACCORDION_JS))},init=function(){$listAccordions().forEach(function(e,t){var r=t+1,A=e.hasAttribute(ACCORDION_DATA_PREFIX_CLASS)===!0?e.getAttribute(ACCORDION_DATA_PREFIX_CLASS)+"-":"";"none"===e.getAttribute(ACCORDION_DATA_MULTISELECTABLE)?e.setAttribute(ATTR_MULTISELECTABLE,"false"):e.setAttribute(ATTR_MULTISELECTABLE,"true"),e.setAttribute(ATTR_ROLE,ACCORDION_ROLE_TABLIST),addClass(e,A+ACCORDION_STYLE);var n=[].slice.call(e.querySelectorAll("."+ACCORDION_JS_HEADER));n.forEach(function(t,n){var a,s,i=n+1,c=t.nextElementSibling,_=t.innerHTML,E=document.createElement("BUTTON"),o=t.hasAttribute(ACCORDION_DATA_OPENED)===!0?t.getAttribute(ACCORDION_DATA_OPENED):"";E.innerHTML=_,addClass(E,ACCORDION_JS_HEADER),addClass(E,A+ACCORDION_HEADER_STYLE),setAttributes(E,(a={},_defineProperty(a,ATTR_ROLE,ACCORDION_ROLE_TAB),_defineProperty(a,"id",ACCORDION_PREFIX_IDS+r+ACCORDION_BUTTON_ID+i),_defineProperty(a,ATTR_CONTROLS,ACCORDION_PREFIX_IDS+r+ACCORDION_PANEL_ID+i),_defineProperty(a,ATTR_SELECTED,"false"),_defineProperty(a,"tabindex","-1"),_defineProperty(a,"type","button"),a)),E=e.insertBefore(E,t),c.insertBefore(t,c.firstChild),addClass(t,A+ACCORDION_TITLE_STYLE),removeClass(t,ACCORDION_JS_HEADER),addClass(c,A+ACCORDION_PANEL_STYLE),setAttributes(c,(s={},_defineProperty(s,ATTR_ROLE,ACCORDION_ROLE_TABPANEL),_defineProperty(s,ATTR_LABELLEDBY,ACCORDION_PREFIX_IDS+r+ACCORDION_BUTTON_ID+i),_defineProperty(s,"id",ACCORDION_PREFIX_IDS+r+ACCORDION_PANEL_ID+i),s)),"true"===o?(E.setAttribute(ATTR_EXPANDED,"true"),t.removeAttribute(ACCORDION_DATA_OPENED),c.setAttribute(ATTR_HIDDEN,"false")):(E.setAttribute(ATTR_EXPANDED,"false"),c.setAttribute(ATTR_HIDDEN,"true")),1===i&&E.removeAttribute("tabindex")})}),["click","keydown","focus"].forEach(function(e){document.body.addEventListener(e,function(t){if(hasClass(t.target,ACCORDION_JS_HEADER)===!0&&"focus"===e){var r=t.target,A=r.parentNode,n=[].slice.call(A.querySelectorAll("."+ACCORDION_JS_HEADER));unSelectHeaders(n),selectHeader(r)}hasClass(t.target,ACCORDION_JS_HEADER)===!0&&"click"===e&&!function(){var e=t.target,r=e.parentNode,A=[].slice.call(r.querySelectorAll("."+ACCORDION_JS_HEADER)),n=r.getAttribute(ATTR_MULTISELECTABLE),a=findById(e.getAttribute(ATTR_CONTROLS)),s=e.getAttribute(ATTR_EXPANDED);"false"===s?(e.setAttribute(ATTR_EXPANDED,!0),a.removeAttribute(ATTR_HIDDEN)):(e.setAttribute(ATTR_EXPANDED,!1),a.setAttribute(ATTR_HIDDEN,!0)),"false"===n&&A.forEach(function(t){var r=findById(t.getAttribute(ATTR_CONTROLS));t!==e?(t.setAttribute(ATTR_SELECTED,!1),t.setAttribute(ATTR_EXPANDED,!1),r.setAttribute(ATTR_HIDDEN,!0)):t.setAttribute(ATTR_SELECTED,!0)}),setTimeout(function(){e.focus()},0),t.preventDefault()}(),hasClass(t.target,ACCORDION_JS_HEADER)===!0&&"keydown"===e&&!function(){var e=t.target,r=e.parentNode,A=[].slice.call(r.querySelectorAll("."+ACCORDION_JS_HEADER));36===t.keyCode?(unSelectHeaders(A),selectHeader(A[0]),setTimeout(function(){A[0].focus()},0),t.preventDefault()):35===t.keyCode?(unSelectHeaders(A),selectHeader(A[A.length-1]),setTimeout(function(){A[A.length-1].focus()},0),t.preventDefault()):37!==t.keyCode&&38!==t.keyCode||t.ctrlKey?40!==t.keyCode&&39!==t.keyCode||t.ctrlKey||("true"===A[A.length-1].getAttribute(ATTR_SELECTED)?(unSelectHeaders(A),selectHeader(A[0]),setTimeout(function(){A[0].focus()},0),t.preventDefault()):(selectHeaderInList(A,"next"),t.preventDefault())):"true"===A[0].getAttribute(ATTR_SELECTED)?(unSelectHeaders(A),selectHeader(A[A.length-1]),setTimeout(function(){A[A.length-1].focus()},0),t.preventDefault()):(selectHeaderInList(A,"prev"),t.preventDefault())}();var a=searchParent(t.target,ACCORDION_JS_PANEL);""!==a&&"keydown"===e&&!function(){var e=findById(a),r=e.parentNode,A=[].slice.call(r.querySelectorAll("."+ACCORDION_JS_HEADER)),n=findById(e.getAttribute(ATTR_LABELLEDBY));38===t.keyCode&&t.ctrlKey&&(unSelectHeaders(A),selectHeader(n),setTimeout(function(){n.focus()},0),t.preventDefault()),33===t.keyCode&&t.ctrlKey&&(unSelectHeaders(A),selectHeader(n),n.focus(),t.preventDefault(),"true"===A[0].getAttribute(ATTR_SELECTED)?(unSelectHeaders(A),selectHeader(A[A.length-1]),setTimeout(function(){A[A.length-1].focus()},0)):selectHeaderInList(A,"prev")),34===t.keyCode&&t.ctrlKey&&(unSelectHeaders(A),selectHeader(n),n.focus(),t.preventDefault(),"true"===A[A.length-1].getAttribute(ATTR_SELECTED)?(unSelectHeaders(A),selectHeader(A[0]),setTimeout(function(){A[0].focus()},0)):selectHeaderInList(A,"next"))}()},!0)})};exports.init=init;